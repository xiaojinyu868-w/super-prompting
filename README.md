# 增强型自监督提示优化系统

这是一个强大的提示词优化系统，它结合了自动化优化和人类反馈，帮助用户创建更高质量的提示词。

## 功能特点

- **自动优化**：利用大型语言模型自动生成和评估提示词改进
- **流式输出**：支持流式响应，提供更流畅的用户体验
- **人机协作**：结合AI自动优化和人类专业判断
- **可视化界面**：直观展示优化过程和结果比较
- **详细分析**：提供每次改进的详细分析和理由
- **历史追踪**：记录完整优化历史，支持导出和回顾

## 快速开始

### 安装依赖

```bash
# 安装Node.js依赖
npm install

# 安装Python依赖
pip install -r requirements.txt
```

### 配置环境变量

创建`.env`文件或修改现有的`.env`文件：

```
PORT=3000
NODE_ENV=development
DEFAULT_API_BASE_URL=https://api.siliconflow.cn
DEFAULT_API_KEY=your_default_api_key
ENABLE_STREAMING=true
```

### 启动服务

```bash
# 启动后端服务
npm start

# 在另一个终端启动Streamlit前端
streamlit run app.py
```

启动后访问 http://localhost:8501 开始使用Streamlit界面。

## 使用指南

1. **配置API**
   - 输入你的API密钥和基础URL（默认为硅基流动API）
   - 选择各个功能使用的模型和参数

2. **设置任务**
   - 输入详细的任务需求描述
   - 提供初始提示词作为优化起点
   - 设置最大迭代次数和是否自动模式

3. **优化过程**
   - 系统会自动生成测试样本
   - 每次迭代生成新的提示词候选
   - 评估新旧提示词的输出质量
   - 分析提示词变化和改进原因

4. **提供反馈（可选）**
   - 对优化结果进行评分
   - 直接编辑提示词
   - 提供文本反馈指导后续优化

5. **完成优化**
   - 查看最终优化提示词
   - 导出完整优化历史
   - 开始新的优化任务

## 系统架构

```
+---------------------------+
|      Streamlit前端        |
| - 用户配置面板            |
| - 优化过程可视化          |
| - 反馈与交互组件          |
+------------+--------------+
             |
             v
+---------------------------+
|        后端服务           |
| - API封装与管理           |
| - 优化流程控制            |
| - 样本生成与管理          |
| - 提示版本控制            |
+------------+--------------+
             |
             v
+---------------------------+
|      大模型服务层         |
| - 优化模型 (LLM-1)        |
| - 执行模型 (LLM-2)        |
| - 评估模型 (LLM-3)        |
| - 分析模型 (LLM-4)        |
+---------------------------+
```

## 技术栈

- **前端**：Streamlit, Python
- **后端**：Node.js, Express
- **API集成**：硅基流动API (支持OpenAI兼容接口)
- **流式处理**：支持SSE (Server-Sent Events)

## 可用模型

SPO+支持以下硅基流动API模型：

- Qwen/QwQ-32B
- Pro/deepseek-ai/DeepSeek-R1
- Pro/deepseek-ai/DeepSeek-V3
- deepseek-ai/DeepSeek-R1
- deepseek-ai/DeepSeek-V3
- deepseek-ai/DeepSeek-R1-Distill-Qwen-32B

## 注意事项

- 需要有效的API密钥才能使用
- 优化质量取决于初始提示词和任务描述的质量
- 建议任务描述尽可能详细和具体
- 自动模式下会消耗更多API调用次数

## 许可证

MIT 